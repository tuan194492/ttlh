<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đồng Hồ Đếm Ngược Sinh Động</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
        }
        #clockCanvas {
            margin-top: 50px;
            border: 5px solid #333;
            border-radius: 50%;
            background-color: #f3f3f3;
        }
        #countdown {
            font-size: 24px;
            margin-top: 20px;
            color: #ff0000;
        }
    </style>
</head>
<body>
    <h1>Lan Hương cố lên ^^</h1>
    <canvas id="clockCanvas" width="300" height="300"></canvas>
    <div id="countdown"></div>

    <script>
        var canvas = document.getElementById("clockCanvas");
        var ctx = canvas.getContext("2d");

        function drawClock() {
            var now = new Date();
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            var radius = canvas.height / 2;
            ctx.translate(radius, radius);
            radius = radius * 0.90;
            drawFace(ctx, radius);
            drawNumbers(ctx, radius);  // Thêm số
            drawTime(ctx, radius, now);
            ctx.translate(-canvas.width / 2, -canvas.height / 2);
        }

        function drawFace(ctx, radius) {
            ctx.beginPath();
            ctx.arc(0, 0, radius, 0, 2 * Math.PI);
            ctx.fillStyle = 'white';
            ctx.fill();

            ctx.strokeStyle = '#333';
            ctx.lineWidth = radius * 0.1;
            ctx.stroke();

            ctx.beginPath();
            ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);
            ctx.fillStyle = '#333';
            ctx.fill();
        }

        function drawNumbers(ctx, radius) {
            var ang;
            var num;
            ctx.font = radius * 0.15 + "px Arial";
            ctx.textBaseline = "middle";
            ctx.textAlign = "center";
            for (num = 1; num <= 12; num++) {
                ang = num * Math.PI / 6;
                ctx.rotate(ang);
                ctx.translate(0, -radius * 0.85);
                ctx.rotate(-ang);
                ctx.fillText(num.toString(), 0, 0);
                ctx.rotate(ang);
                ctx.translate(0, radius * 0.85);
                ctx.rotate(-ang);
            }
        }

        function drawTime(ctx, radius, now) {
            var hour = now.getHours();
            var minute = now.getMinutes();
            var second = now.getSeconds();

            hour = hour % 12;
            hour = (hour * Math.PI / 6) + (minute * Math.PI / (6 * 60)) + (second * Math.PI / (360 * 60));
            drawHand(ctx, hour, radius * 0.5, radius * 0.07);

            minute = (minute * Math.PI / 30) + (second * Math.PI / (30 * 60));
            drawHand(ctx, minute, radius * 0.8, radius * 0.07);

            second = (second * Math.PI / 30);
            drawHand(ctx, second, radius * 0.9, radius * 0.02, 'red');
        }

        function drawHand(ctx, pos, length, width, color = '#333') {
            ctx.beginPath();
            ctx.lineWidth = width;
            ctx.lineCap = "round";
            ctx.strokeStyle = color;
            ctx.moveTo(0, 0);
            ctx.rotate(pos);
            ctx.lineTo(0, -length);
            ctx.stroke();
            ctx.rotate(-pos);
        }

        function countdownToFivePM() {
            var now = new Date();
            var targetTime = new Date();
            
            targetTime.setHours(17, 0, 0, 0);

            if (now > targetTime) {
                targetTime.setDate(targetTime.getDate() + 1);
            }

            var timeDifference = targetTime - now;

            var hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

            document.getElementById("countdown").innerHTML = "Còn lại: " + hours + " giờ " + minutes + " phút " + seconds + " giây";

            setTimeout(countdownToFivePM, 1000);
        }

        function updateClock() {
            drawClock();
            countdownToFivePM();
        }

        setInterval(updateClock, 1000);
    </script>
</body>
</html>
